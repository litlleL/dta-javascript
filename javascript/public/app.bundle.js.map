{"version":3,"sources":["webpack:///webpack/bootstrap 9ff46cc34a706be47507","webpack:///./src/app.js","webpack:///./src/services/recipes.service.js","webpack:///./src/services/pizzeria.service.js"],"names":["recipesService","pizzeriaService","console","log","start","RecipesService","recipes","Promise","resolve","fetch","then","response","json","recipe","pizza","toppings","length","reduce","acc","topping","indexOf","lastIndexOf","getRecipes","isRecipeCompliant","name","find","catch","handleError","map","query","filter","toLowerCase","includes","err","alert","PizzeriaService","pool","time","getRecipesNames","intervalId","setInterval","index","Math","floor","random","recipesNames","recipeName","push","clearInterval","pizzaName","idx","splice"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9ff46cc34a706be47507","import { RecipesService } from './services/recipes.service';\r\nimport { PizzeriaService } from './services/pizzeria.service';\r\n\r\n\r\nconst recipesService = new RecipesService();\r\nconst pizzeriaService = new PizzeriaService(recipesService);\r\n\r\nconsole.log('test')\r\npizzeriaService.start(1000);\r\nconsole.log('ein')\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","export class RecipesService {\r\n    constructor() {\r\n        this.recipes = null;\r\n    }\r\n\r\n    // return Promise<[recipe]>\r\n    getRecipes() {\r\n        if (this.recipes) return Promise.resolve(this.recipes);\r\n\r\n        return fetch('http://localhost:3000/recipes')\r\n            .then(response => response.json())\r\n            .then(recipes => this.recipes = recipes);\r\n    }\r\n\r\n    /*compare(element1, element2) {\r\n        let array = [];\r\n        element1.forEach(function(item) {\r\n            let contenu = element2.filter(function(items) {\r\n                return item === items;\r\n            });\r\n            if (contenu.length != 0) {\r\n                array.push(contenu)\r\n            }\r\n        });\r\n        return array;\r\n    }\r\n\r\n    isRecipeCompliant(recipe, pizza) {\r\n        if (pizza.length !== recipe.length) {\r\n            return false;\r\n        }\r\n\r\n        let array = this.compare(pizza, recipe);\r\n\r\n        if (array.length !== recipe.length) {\r\n            return false;\r\n        } else {\r\n            let array = this.compare(recipe, pizza);\r\n            let bool = (array.length !== recipe.length) ? false : true;\r\n            return bool;\r\n        }\r\n    }*/\r\n\r\n    isRecipeCompliant(recipe, pizza) {\r\n        if (recipe.toppings.length !== pizza.toppings.length) return false;\r\n\r\n        return pizza.toppings.reduce((acc, topping) =>\r\n            acc &&\r\n            recipe.toppings.indexOf(topping) !== -1 &&\r\n            pizza.toppings.indexOf(topping) === pizza.toppings.lastIndexOf(topping), true);\r\n    }\r\n\r\n    getPizzaRecipeName(pizza) {\r\n        return this.getRecipes()\r\n            .then(recipes => {\r\n                return recipes.reduce(\r\n                    (acc, recipe) =>\r\n                    acc ||\r\n                    (this.isRecipeCompliant(recipe, pizza) ? recipe.name : false),\r\n                    false);\r\n            })\r\n    }\r\n\r\n    getRecipe(name) {\r\n        return this.getRecipes()\r\n            .then(recipes => recipes.find(recipe => recipe.name === name))\r\n            .catch(this.handleError)\r\n    }\r\n\r\n    getRecipesNames() {\r\n        return this.getRecipes()\r\n            .then(recipes => recipes.map(recipe => recipe.name))\r\n            .catch(this.handleError)\r\n    }\r\n\r\n    queryRecipes(query) {\r\n        return this.getRecipes()\r\n            .then(recipes =>\r\n                recipes\r\n                .filter(recipe =>\r\n                    recipe.name.toLowerCase().includes(query.toLowerCase())\r\n                )\r\n            );\r\n    }\r\n\r\n    handleError(err) {\r\n        alert('Une erreur est survenue')\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/recipes.service.js","export class PizzeriaService {\r\n\r\n    constructor(recipesService) {\r\n        this.pool = [];\r\n        this.recipesService = recipesService;\r\n    }\r\n\r\n    start(time) {\r\n        // every time seconds add a new recipe name to the pool\r\n        this.recipesService.getRecipesNames()\r\n            .then(recipesNames => {\r\n                const intervalId = setInterval(() => {\r\n                    const index = Math.floor(Math.random() * recipesNames.length);\r\n                    const recipeName = recipesNames[index];\r\n                    this.pool.push(recipeName);\r\n                    console.log('POOL : ', this.pool);\r\n\r\n                    if (this.pool.length >= 10) {\r\n                        alert('GAME OVER');\r\n                        clearInterval(intervalId);\r\n                    }\r\n                }, time);\r\n\r\n            })\r\n    }\r\n\r\n    // { id: 1, toppings: ['', ''] }\r\n    sendPizza(pizzaName) {\r\n        const idx = this.pool.indexOf(pizzaName);\r\n        if (idx !== -1) this.pool.splice(idx, 1);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/pizzeria.service.js"],"sourceRoot":""}